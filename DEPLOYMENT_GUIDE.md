# üöÄ VOICE BOOKING APP - DEPLOYMENT GUIDE

**Generated by**: Claude Code - Deployment Engineer  
**Date**: September 1, 2025  
**Status**: Production Ready with Configuration

---

## üìã QUICK START DEPLOYMENT

### **1. Railway Backend Deployment**

#### Prerequisites
- Railway account connected to GitHub repo
- Environment variables configured in Railway dashboard

#### Deployment Steps:
```bash
# 1. Auto-deployment is already configured
# Railway automatically deploys on git push to main branch

# 2. Monitor deployment
railway logs

# 3. Verify health check
curl https://your-railway-app.up.railway.app/health
```

#### Required Environment Variables in Railway:
```bash
# Set these in Railway dashboard > Variables
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
OPENAI_API_KEY=sk-your-openai-api-key

# Optional (auto-configured by Railway)
PORT=8000
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1
```

### **2. Vercel Frontend Deployment**

#### Prerequisites
- Vercel account connected to GitHub repo
- Environment variables configured in Vercel dashboard

#### Deployment Steps:
```bash
# 1. Connect your repo to Vercel
# 2. Configure build settings:
#    - Framework: Next.js
#    - Root Directory: frontend
#    - Build Command: npm run build
#    - Output Directory: .next

# 3. Set environment variables in Vercel dashboard
NEXT_PUBLIC_API_URL=https://your-railway-app.up.railway.app

# 4. Deploy automatically on git push
```

---

## üîß CI/CD PIPELINE CONFIGURATION

### **GitHub Actions Setup**

The CI/CD pipeline includes:
- ‚úÖ Frontend linting and type checking
- ‚úÖ Backend linting and testing  
- ‚úÖ Docker build verification
- ‚úÖ Automatic deployment to Railway & Vercel
- ‚úÖ Post-deployment health checks

#### Required GitHub Secrets:
```bash
# For Railway deployment
RAILWAY_TOKEN=your-railway-token

# For Vercel deployment  
VERCEL_TOKEN=your-vercel-token
VERCEL_ORG_ID=your-org-id
VERCEL_PROJECT_ID=your-project-id
```

#### To get these tokens:
1. **Railway Token**: Railway Dashboard > Account > Tokens > New Token
2. **Vercel Token**: Vercel Dashboard > Settings > Tokens > Create
3. **Vercel IDs**: Use `vercel link` in your project directory

---

## üê≥ DOCKER CONFIGURATION

### **Production Dockerfile** (Root Level - Used by Railway)
- ‚úÖ Optimized for Railway deployment
- ‚úÖ Health check configured (30s start period)
- ‚úÖ Environment variable support
- ‚úÖ Python 3.11-slim base image

### **Development Dockerfile** (Backend Directory - Local Development)
- ‚úÖ Development-focused configuration
- ‚úÖ Volume mounting support
- ‚úÖ Hot reload enabled

---

## üîê ENVIRONMENT VARIABLES GUIDE

### **Backend (Railway)**
| Variable | Required | Description | Example |
|----------|----------|-------------|---------|
| `SUPABASE_URL` | ‚úÖ | Supabase project URL | `https://abc123.supabase.co` |
| `SUPABASE_ANON_KEY` | ‚úÖ | Public anon key | `eyJ...` |
| `OPENAI_API_KEY` | ‚úÖ | OpenAI API key | `sk-proj-...` |
| `PORT` | ‚ùå | Server port (auto-set) | `8000` |
| `DEBUG` | ‚ùå | Debug mode | `false` |

### **Frontend (Vercel)**
| Variable | Required | Description | Example |
|----------|----------|-------------|---------|
| `NEXT_PUBLIC_API_URL` | ‚úÖ | Backend API URL | `https://your-app.up.railway.app` |

---

## üö¶ DEPLOYMENT VERIFICATION

### **Automated Health Checks**
The CI/CD pipeline includes automatic verification:

```bash
# Backend health check
curl -f https://your-railway-app.up.railway.app/health

# Expected response:
{
  "status": "healthy",
  "service": "Voice Booking App API", 
  "version": "1.0.0",
  "database": "connected"  # Will be "mock_mode" initially
}

# Frontend verification
curl -f https://your-vercel-app.vercel.app
```

### **Manual Testing Steps**
1. ‚úÖ Verify backend API endpoints at `/docs`
2. ‚úÖ Test frontend loads correctly
3. ‚úÖ Check CORS configuration with cross-origin requests
4. ‚úÖ Verify WebSocket connections (when voice features enabled)

---

## üîÑ DEPLOYMENT WORKFLOW

### **Current Strategy** (Working Solution)
```
GitHub Push ‚Üí Railway Auto-Deploy + Vercel Auto-Deploy
```

### **Enhanced CI/CD** (Ready to Activate)
```
GitHub Push ‚Üí GitHub Actions ‚Üí Tests ‚Üí Deploy ‚Üí Health Check ‚Üí Notify
```

#### To Activate Enhanced CI/CD:
1. Add the required secrets to GitHub repository
2. The workflow in `.github/workflows/ci-cd.yml` will automatically trigger
3. Monitor in Actions tab for deployment status

---

## üö® TROUBLESHOOTING

### **Common Issues & Solutions**

#### 1. **Railway Health Check Timeout**
```bash
# Issue: Health check fails during deployment
# Solution: Increase start-period in health check (already configured)
# File: Dockerfile line 25 - start-period=30s
```

#### 2. **Database Connection Issues** 
```bash
# Issue: Mock mode still enabled
# Solution: Remove mock mode from main.py after deployment confirmed
# File: backend/app/main.py lines 26-27
```

#### 3. **CORS Errors**
```bash  
# Issue: Frontend can't connect to backend
# Solution: Verify CORS origins include your Vercel domain
# File: backend/app/core/config.py lines 36-42
```

#### 4. **Build Failures**
```bash
# Issue: CI/CD pipeline fails
# Solution: Check GitHub Actions logs and verify secrets
```

---

## üìä MONITORING & MAINTENANCE

### **Health Monitoring**
- ‚úÖ Railway provides automatic monitoring
- ‚úÖ Vercel provides analytics dashboard
- ‚úÖ GitHub Actions provides deployment status
- ‚è∏Ô∏è Consider adding Sentry for error tracking

### **Performance Monitoring**
- ‚úÖ Railway metrics available in dashboard
- ‚úÖ Vercel Web Vitals in analytics
- ‚è∏Ô∏è Consider adding custom metrics endpoint

### **Backup Strategy**
- ‚úÖ Code: Git repository
- ‚úÖ Database: Supabase automatic backups
- ‚è∏Ô∏è Consider regular backup verification

---

## üéØ NEXT STEPS

### **Phase 1: Enable Production Mode** (Priority 1)
1. Set environment variables in Railway dashboard
2. Remove mock mode from `backend/app/main.py`  
3. Test database connectivity
4. Verify OpenAI API integration

### **Phase 2: Enhanced Monitoring** (Priority 2)
1. Add Sentry error tracking
2. Configure log aggregation
3. Set up uptime monitoring
4. Create alerting rules

### **Phase 3: Advanced CI/CD** (Priority 3) 
1. Add automated testing
2. Multi-environment deployments (staging/prod)
3. Blue-green deployment strategy
4. Performance regression testing

---

## üìû SUPPORT & DOCUMENTATION

- **Railway Docs**: https://docs.railway.app
- **Vercel Docs**: https://vercel.com/docs
- **GitHub Actions**: https://docs.github.com/actions
- **Project Status**: See `PROGRESS_TRACKING.md`
- **DevOps Audit**: See `DEVOPS_AUDIT_REPORT.md`

---

**Deployment Configuration Completed by:**  
**Claude Code - Deployment Engineer**  
**Specialized in Railway/Vercel CI/CD Pipeline Configuration**

**Status**: ‚úÖ **READY FOR PRODUCTION DEPLOYMENT**